<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garfield Comics</title>
    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    
    <!-- Enhanced PWA Support -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FF6F00" id="theme-color">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Add iOS icon support -->
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-icon-180x180.png">
    
    <!-- Add a splash screen for iOS -->
    <link rel="apple-touch-startup-image" href="icons/splash.png">
    
    <meta name="theme-color" content="#FF6F00" id="theme-color">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <!-- Remove Supabase -->
    <!-- <script src="https://unpkg.com/@supabase/supabase-js@2"></script> -->
    
    <!-- Remove Firebase -->
    <!-- <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script> -->

    <!-- Firebase Configuration and Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-functions-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script>
        // Initialize Firebase directly in HTML instead of separate file
        const firebaseConfig = {
            apiKey: "AIzaSyAzhaiFLiksHSUjRd_YbwiDGLTLZAt3bas", // Replace with your actual API key
            authDomain: "garfieldapp-4c237.firebaseapp.com",
            databaseURL: "https://garfieldapp-4c237-default-rtdb.firebaseio.com",
            projectId: "garfieldapp-4c237",
            storageBucket: "garfieldapp-4c237.appspot.com",
            messagingSenderId: "656782689955",
            appId: "1:656782689955:web:24471e0eb46bca6c8ef2a9"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // Initialize Firebase Authentication
        const auth = firebase.auth();
        auth.signInAnonymously().catch(error => {
            console.error('Error signing in anonymously:', error);
        });

        auth.onAuthStateChanged(user => {
            if (user) {
                console.log('User signed in:', user);
            } else {
                console.log('User signed out');
            }
        });
    </script>
</head>
<body>
    <header class="header">
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/b/bc/Garfield_the_Cat.svg/1200px-Garfield_the_Cat.svg.png" alt="Garfield Logo" class="logo">
    </header>
    
    <button id="mode-toggle" class="mode-toggle" aria-label="Toggle dark mode">
        <i class="fas fa-moon"></i>
    </button>
    
    <main class="main-content">
        <!-- Changed from comic-container to comic-wrapper to avoid the hidden class -->
        <div class="comic-wrapper position-relative">
            <img id="comic-img" class="comic-image" src="" alt="Garfield Comic">
            
            <!-- Counter remains inside the wrapper -->
            <div class="favorites-counter">
                <i class="fas fa-heart"></i>
                <span id="favorites-count">0</span>
            </div>
        </div>
        
        <div class="comic-controls">
            <div class="comic-selector">
                <input type="date" id="comic-date" class="date-picker">
            </div>
        </div>
        <div class="favorites-section" id="favorites-section">
            <div id="favorites-list" class="favorites-grid"></div>
        </div>
        <div class="comments-section">
            <div id="comments-list"></div>
            <textarea id="comment-input" placeholder="Add a comment..." rows="2"></textarea>
            <button id="submit-comment" class="btn">Post</button>
        </div>
    </main>
    <nav class="bottom-nav">
        <button id="prev-comic" class="nav-button"><i class="fas fa-arrow-left"></i></button>
        <button id="first-comic" class="nav-button"><i class="fas fa-backward"></i></button>
        <button id="random-comic" class="nav-button"><i class="fas fa-dice"></i></button>
        <button id="today-comic" class="nav-button"><i class="fas fa-calendar-day"></i></button>
        <button id="favorite-comic" class="nav-button"><i class="fas fa-heart"></i></button>
        <button id="view-favorites" class="nav-button"><i class="fas fa-list"></i></button>
        <button id="next-comic" class="nav-button"><i class="fas fa-arrow-right"></i></button>
    </nav>
    <script src="api.js"></script>
    <script src="main.js"></script>
</body>
</html>
